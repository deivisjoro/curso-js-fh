const juego=(()=>{"use strict";let e=[],t=["C","D","H","S"],a=["J","Q","K","A"],l=[],r=0,n=document.querySelector("#btnPedir"),d=document.querySelector("#btnDetener"),s=document.querySelector("#btnNuevo"),o=document.querySelectorAll(".tablero small span"),i=document.querySelectorAll('[id^="cartas-jugador-"]'),c=(t=2)=>{e=u(),l=[],r=0;for(let a=0;a<t;a++)l.push(0),o[a].textContent=0,i[a].innerHTML="";n.disabled=!1,d.disabled=!0},u=()=>{let e=[];for(let l of t){for(let r=2;r<=10;r++)e.push(`${r+""+l}`);for(let n of a)e.push(`${n+""+l}`)}return _.shuffle(e)},b=()=>{if(0===e.length)throw"No hay cartas en la baraja";return e.pop()},$=e=>{let t=e.substring(0,e.length-1);return isNaN(t)?"A"===t?11:10:Number(t)},g=(e,t)=>{l[e]+=$(t),o[e].textContent=l[e]},h=(e,t)=>{let a=document.createElement("img");a.src=`assets/cartas/${t}.png`,a.classList.add("carta"),a.alt="imagen de carta",i[e].appendChild(a)},p=()=>{l[r]===l[r-1]?alert("Ninguno ha ganado"):l[r]>21?alert(`El jugador ha ganado con ${l[r-1]} puntos`):alert(`La computadora ha ganado con ${l[r]} puntos`)},f=()=>{do{let e=b();g(r,e),h(r,e)}while(l[r]<l[r-1]&&l[r-1]<=21);p()};return d.disabled=!0,n.addEventListener("click",e=>{btnDetener.disabled&&(btnDetener.disabled=!1);let t=b();g(r,t),h(r,t),l[r]>=21&&(n.disabled=!0,d.disabled=!0,r++,f())}),d.addEventListener("click",e=>{n.disabled=!0,d.disabled=!0,r++,f()}),s.addEventListener("click",e=>{c()}),c(),{inicializarJuego:c}})();